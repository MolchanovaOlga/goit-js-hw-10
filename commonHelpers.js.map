{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst button = document.querySelector('button[data-start]');\nconst input = document.querySelector('#datetime-picker');\nconst daysOfTimer = document.querySelector('span[data-days]');\nconst hoursOfTimer = document.querySelector('span[data-hours]');\nconst minutesOfTimer = document.querySelector('span[data-minutes]');\nconst secondsOfTimer = document.querySelector('span[data-seconds]');\n\nconst currentDate = new Date();\nlet userSelectedDate;\nconst arr = [daysOfTimer, hoursOfTimer, minutesOfTimer, secondsOfTimer];\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      //console.log(selectedDates[0]);\n      userSelectedDate = selectedDates[0];\n      getUserDate(userSelectedDate);\n    },\n};\n\nflatpickr(\"#datetime-picker\", options);\n\nfunction getUserDate(date) {\n  if (date <= currentDate) {\n    button.setAttribute('disabled', true);\n    error();\n    } else {\n      button.removeAttribute('disabled');\n      button.addEventListener('click', addTimer);\n    }\n}\n\nfunction error() {\n  iziToast.error({\n    title: \"Error\",\n    message: \"Please choose a date in the future.\",\n    position: \"topRight\",\n    backgroundColor: \"#EF4040\",\n    //icon: 'octagon',\n  });\n}\n\nfunction addTimer() {\n  button.setAttribute('disabled', true);\n  input.setAttribute('disabled', true);\n  let diffOfTime = userSelectedDate.getTime() - currentDate.getTime();\n  let setIntervalId;\n\n  setIntervalId = setInterval(() => {\n    diffOfTime = diffOfTime - 1000;\n    const objOfDifference = convertMs(diffOfTime);\n    drawTimer(objOfDifference);\n\n    if (diffOfTime < 0) {\n      for (let i = 0; i < arr.length; i += 1) {\n        arr[i].textContent = '00';\n      }\n      clearInterval(setIntervalId);\n      button.removeEventListener('click', addTimer);\n      return;\n    }\n  }, 1000);\n\n}\n\nfunction drawTimer({days, hours, minutes, seconds}) {\n  daysOfTimer.textContent = String(days).padStart(2, \"0\");\n  hoursOfTimer.textContent = String(hours).padStart(2, \"0\");\n  minutesOfTimer.textContent = String(minutes).padStart(2, \"0\");\n  secondsOfTimer.textContent = String(seconds).padStart(2, \"0\");\n}\n\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\n\n\n\n"],"names":["button","input","daysOfTimer","hoursOfTimer","minutesOfTimer","secondsOfTimer","currentDate","userSelectedDate","arr","options","selectedDates","getUserDate","flatpickr","date","error","addTimer","iziToast","diffOfTime","setIntervalId","objOfDifference","convertMs","drawTimer","i","days","hours","minutes","seconds","ms"],"mappings":"2GAKA,MAAMA,EAAS,SAAS,cAAc,oBAAoB,EACpDC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAc,SAAS,cAAc,iBAAiB,EACtDC,EAAe,SAAS,cAAc,kBAAkB,EACxDC,EAAiB,SAAS,cAAc,oBAAoB,EAC5DC,EAAiB,SAAS,cAAc,oBAAoB,EAE5DC,EAAc,IAAI,KACxB,IAAIC,EACJ,MAAMC,EAAM,CAACN,EAAaC,EAAcC,EAAgBC,CAAc,EAEhEI,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAErBH,EAAmBG,EAAc,GACjCC,EAAYJ,CAAgB,CAC7B,CACL,EAEAK,EAAU,mBAAoBH,CAAO,EAErC,SAASE,EAAYE,EAAM,CACrBA,GAAQP,GACVN,EAAO,aAAa,WAAY,EAAI,EACpCc,MAEEd,EAAO,gBAAgB,UAAU,EACjCA,EAAO,iBAAiB,QAASe,CAAQ,EAE/C,CAEA,SAASD,GAAQ,CACfE,EAAS,MAAM,CACb,MAAO,QACP,QAAS,sCACT,SAAU,WACV,gBAAiB,SAErB,CAAG,CACH,CAEA,SAASD,GAAW,CAClBf,EAAO,aAAa,WAAY,EAAI,EACpCC,EAAM,aAAa,WAAY,EAAI,EACnC,IAAIgB,EAAaV,EAAiB,QAAS,EAAGD,EAAY,QAAO,EAC7DY,EAEJA,EAAgB,YAAY,IAAM,CAChCD,EAAaA,EAAa,IAC1B,MAAME,EAAkBC,EAAUH,CAAU,EAG5C,GAFAI,EAAUF,CAAe,EAErBF,EAAa,EAAG,CAClB,QAASK,EAAI,EAAGA,EAAId,EAAI,OAAQc,GAAK,EACnCd,EAAIc,GAAG,YAAc,KAEvB,cAAcJ,CAAa,EAC3BlB,EAAO,oBAAoB,QAASe,CAAQ,EAC5C,MACD,CACF,EAAE,GAAI,CAET,CAEA,SAASM,EAAU,CAAC,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAG,CAClDxB,EAAY,YAAc,OAAOqB,CAAI,EAAE,SAAS,EAAG,GAAG,EACtDpB,EAAa,YAAc,OAAOqB,CAAK,EAAE,SAAS,EAAG,GAAG,EACxDpB,EAAe,YAAc,OAAOqB,CAAO,EAAE,SAAS,EAAG,GAAG,EAC5DpB,EAAe,YAAc,OAAOqB,CAAO,EAAE,SAAS,EAAG,GAAG,CAC9D,CAGA,SAASN,EAAUO,EAAI,CAQrB,MAAMJ,EAAO,KAAK,MAAMI,EAAK,KAAG,EAE1BH,EAAQ,KAAK,MAAOG,EAAK,MAAO,IAAI,EAEpCF,EAAU,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,EAEjDD,EAAU,KAAK,MAASC,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}